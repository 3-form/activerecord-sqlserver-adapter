Finished in 508.626312s, 9.5473 runs/s, 27.8692 assertions/s.

  1) Failure:
DirtyTest#test_time_attributes_changes_without_time_zone_by_skip [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/dirty_test.rb:122]:
Expected Sun, 08 Jan 2017 03:02:16 CET +01:00 to be an instance of Time, not ActiveSupport::TimeWithZone.


  2) Failure:
DefaultScopingTest#test_with_abstract_class_scope_should_be_executed_in_correct_context [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/scoping/default_scoping_test.rb:497]:
Expected /"lions"."is_vegetarian"/ to match "SELECT [lions].* FROM [lions] WHERE [lions].[is_vegetarian] = 0".


  3) Failure:
CalculationsTest#test_limit_is_kept_coerced [/Users/kencollins/Repositories/activerecord-sqlserver-adapter/test/cases/coerced_tests.rb:133]:
Expected: 1
  Actual: 3


  4) Error:
CalculationsTest#test_having_with_strong_parameters:
ActiveRecord::StatementInvalid: TinyTds::Error: Column 'accounts.credit_limit' is invalid in the HAVING clause because it is not contained in either an aggregate function or the GROUP BY clause.: EXEC sp_executesql N'SELECT [accounts].* FROM [accounts] GROUP BY [accounts].[id] HAVING [accounts].[credit_limit] = @0', N'@0 int', @0 = 50
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:377:in `select_prepared'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:39:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/delegation.rb:38:in `[]'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/calculations_test.rb:789:in `test_having_with_strong_parameters'


  5) Error:
MultipleDbTest#test_associations_should_work_when_model_has_no_connection:
ActiveRecord::ConnectionNotEstablished: No connection pool with id primary found.
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `retrieve_connection'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_handling.rb:128:in `retrieve_connection'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_handling.rb:91:in `connection'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:76:in `visit_Arel_Table'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:13:in `visit'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:90:in `visit_Arel_Nodes_JoinSource'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:13:in `visit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/to_sql.rb:250:in `visit_Arel_Nodes_SelectCore'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:63:in `block in visit_Arel_Nodes_SelectStatement'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:62:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:62:in `inject'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:62:in `visit_Arel_Nodes_SelectStatement'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:13:in `visit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:7:in `accept'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/determine_if_preparable_visitor.rb:8:in `accept'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:12:in `to_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:32:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:256:in `to_a'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:563:in `find_nth_with_limit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:592:in `find_nth_with_limit_and_offset'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:545:in `find_nth'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:122:in `first'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:3:in `first'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/multiple_db_test.rb:115:in `block in test_associations_should_work_when_model_has_no_connection'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/test_case.rb:83:in `assert_nothing_raised'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/multiple_db_test.rb:114:in `test_associations_should_work_when_model_has_no_connection'


  6) Error:
MultipleDbTest#test_count_on_custom_connection:
ActiveRecord::ConnectionNotEstablished: No connection pool with id primary found.
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:882:in `retrieve_connection'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_handling.rb:128:in `retrieve_connection'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_handling.rb:91:in `connection'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:76:in `visit_Arel_Table'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:13:in `visit'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:90:in `visit_Arel_Nodes_JoinSource'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:13:in `visit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/to_sql.rb:250:in `visit_Arel_Nodes_SelectCore'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:63:in `block in visit_Arel_Nodes_SelectStatement'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:62:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:62:in `inject'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:62:in `visit_Arel_Nodes_SelectStatement'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:13:in `visit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:7:in `accept'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/determine_if_preparable_visitor.rb:8:in `accept'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:12:in `to_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:32:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/calculations.rb:248:in `execute_simple_calculation'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/calculations.rb:207:in `perform_calculation'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/calculations.rb:121:in `calculate'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/calculations.rb:40:in `count'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:13:in `count'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/multiple_db_test.rb:106:in `test_count_on_custom_connection'


  7) Failure:
EachTest#test_in_batches_should_quote_batch_order [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/batches_test.rb:375]:
Query pattern(s) /ORDER BY [posts].[id]/ not found.
Queries:
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts]  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 1  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 1)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 2  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 2)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 3  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 3)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 4  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 4)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 5  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 5)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 6  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 6)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 7  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 7)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 8  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 8)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 9  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 9)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 10  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 10)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].* FROM [posts] WHERE [posts].[id] = 11  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
EXEC sp_executesql N'SELECT  [posts].[id] FROM [posts] WHERE ([posts].[id] > 11)  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1


  8) Failure:
MigrationTest#test_add_table_with_decimals [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration_test.rb:181]:
Expected #<BigDecimal:7fce105b58e8,'0.6E10',9(18)> to be a kind of Integer, not BigDecimal.


  9) Failure:
MigrationTest#test_migration_sets_internal_metadata_even_when_fully_migrated [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration_test.rb:419]:
Expected "development" to not be equal to "development".


 10) Failure:
MigrationTest#test_internal_metadata_stores_environment [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration_test.rb:393]:
Expected "development" to not be equal to "development".


 11) Failure:
MigrationTest#test_filtering_migrations [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration_test.rb:223]:
[ActiveRecord::StatementInvalid] exception expected, not
Class: <NoMethodError>
Message: <"undefined method `second' for nil:NilClass">
---Backtrace---
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:189:in `primary_Key_From_Table'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:157:in `make_Fetch_Possible_And_Deterministic'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:119:in `visit_Orders_And_Let_Fetch_Happen'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/arel/visitors/sqlserver.rb:65:in `visit_Arel_Nodes_SelectStatement'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:13:in `visit'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/arel-7.1.4/lib/arel/visitors/reduce.rb:7:in `accept'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/determine_if_preparable_visitor.rb:8:in `accept'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:12:in `to_sql'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:32:in `select_all'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:256:in `to_a'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:563:in `find_nth_with_limit'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:592:in `find_nth_with_limit_and_offset'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:545:in `find_nth'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:122:in `first'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:3:in `first'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration_test.rb:223:in `block in test_filtering_migrations'
---------------


 12) Failure:
SchemaDumperTest#test_schema_dump_keeps_id_column_when_id_is_false_and_id_column_added [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/schema_dumper_test.rb:320]:
non-primary key id column not preserved.
Expected /t\.string\s+"id",.*?null: false$/ to match "    t.string \"id\",   null: false, collation: \"SQL_Latin1_General_CP1_CI_AS\"".


 13) Failure:
SchemaDumperTest#test_schema_dump_includes_decimal_options [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/schema_dumper_test.rb:262]:
Expected /precision: 3,[[:space:]]+scale: 2,[[:space:]]+default: "2\.78"/ to match "# This file is auto-generated from the current state of the database. Instead\n# of editing this file, please use the migrations feature of Active Record to\n# incrementally modify your database, and then regenerate this schema definition.\n#\n# Note that this schema.rb definition is the authoritative source for your\n# database schema. If you need to create the application database on another\n# system, you should be using db:schema:load, not running all the migrations\n# from scratch. The latter is a flawed and unsustainable approach (the more migrations\n# you'll amass, the slower it'll run and the greater likelihood for issues).\n#\n# It's strongly recommended that you check this file into your version control system.\n\nActiveRecord::Schema.define(version: 0) do\n\n  create_table \"nep_ar_internal_metadata\", primary_key: \"key\", id: :string, collation: \"SQL_Latin1_General_CP1_CI_AS\", force: :cascade do |t|\n    t.string   \"value\",                   collation: \"SQL_Latin1_General_CP1_CI_AS\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"nodes\", force: :cascade do |t|\n    t.integer  \"tree_id\"\n    t.integer  \"parent_id\"\n    t.string   \"name\",       collation: \"SQL_Latin1_General_CP1_CI_AS\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"non_poly_ones\", force: :cascade do |t|\n  end\n\n  create_table \"non_poly_twos\", force: :cascade do |t|\n  end\n\n  create_table \"notifications\", force: :cascade do |t|\n    t.string \"message\", collation: \"SQL_Latin1_General_CP1_CI_AS\"\n  end\n\n  create_table \"numeric_data\", force: :cascade do |t|\n    t.decimal \"bank_balance\",                precision: 10, scale: 2\n    t.decimal \"big_bank_balance\",            precision: 15, scale: 2\n    t.decimal \"world_population\",            precision: 10, scale: 0\n    t.decimal \"my_house_population\",         precision: 2,  scale: 0\n    t.decimal \"decimal_number_with_default\", precision: 3,  scale: 2, default: 2.78\n    t.float   \"temperature\"\n    t.decimal \"atoms_in_universe\",           precision: 38, scale: 0\n  end\n\nend\n".


 14) Failure:
BasicsTest#test_preserving_time_objects_with_time_with_zone_conversion_to_default_timezone_local [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/base_test.rb:269]:
--- expected
+++ actual
@@ -1 +1 @@
-[0, 0, 1, 1, 1, 2000, 6, 1, false, "EST"]
+[0, 0, 0, 1, 1, 2000, 6, 1, false, "CST"]



 15) Failure:
BasicsTest#test_preserving_time_objects_with_time_with_zone_conversion_to_default_timezone_utc [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/base_test.rb:241]:
--- expected
+++ actual
@@ -1 +1 @@
-[0, 0, 6, 1, 1, 2000, 6, 1, false, "UTC"]
+[0, 0, 0, 1, 1, 2000, 6, 1, false, "CST"]



 16) Failure:
MultiParameterAttributeTest#test_multiparameter_attributes_on_time_with_time_zone_aware_attributes [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/multiparameter_attributes_test.rb:209]:
Expected: 2004-06-24 23:24:00 UTC
  Actual: 2004-06-24 16:24:00 UTC


 17) Failure:
ActiveRecord::ConnectionAdapters::QuoteBooleanTest#test_quote_returns_frozen_string [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/quoting_test.rb:159]:
Expected "1" to be frozen?.


 18) Error:
ActiveRecord::Migration::ColumnsTest#test_rename_column_using_symbol_arguments:
ActiveRecord::ActiveRecordError: No such column: test_models.first_name
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/schema_statements.rb:448:in `detect_column_for!'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/schema_statements.rb:149:in `rename_column'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration/helper.rb:36:in `rename_column'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration/columns_test.rb:33:in `test_rename_column_using_symbol_arguments'


 19) Failure:
ActiveRecord::Migration::ColumnsTest#test_rename_column_with_sql_reserved_word [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/migration/columns_test.rb:90]:
Expected false to be truthy.


 20) Error:
LeftOuterJoinAssociationTest#test_does_not_override_select:
ActiveRecord::StatementInvalid: TinyTds::Error: Incorrect syntax near '|'.: EXEC sp_executesql N'SELECT  authors.name, (authors.author_address_id || '' '' || authors.author_address_extra_id) as addr_id FROM [authors] LEFT OUTER JOIN [posts] ON [posts].[author_id] = [authors].[id]  ORDER BY [authors].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:256:in `to_a'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:563:in `find_nth_with_limit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:592:in `find_nth_with_limit_and_offset'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:545:in `find_nth'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:122:in `first'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/associations/left_outer_join_association_test.rb:78:in `test_does_not_override_select'


 21) Failure:
AttributeMethodsTest#test_setting_time_zone_aware_time_with_dst [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/attribute_methods_test.rb:719]:
--- expected
+++ actual
@@ -1 +1 @@
-Sat, 01 Jan 2000 10:00:00 PST -08:00
+Sat, 01 Jan 2000 02:00:00 PST -08:00



 22) Failure:
FinderTest#test_condition_local_time_interpolation_with_default_timezone_utc [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/finder_test.rb:838]:
--- expected
+++ actual
@@ -1 +1 @@
-#<Topic id: 1, title: "The First Topic", author_name: "David", author_email_address: "david@loudthinking.com", written_on: "2003-07-16 14:28:11", bonus_time: "2000-01-01 09:28:00", last_read: "2004-04-15", content: "Have a nice day", important: nil, approved: false, replies_count: 1, unique_replies_count: 0, parent_id: nil, parent_title: nil, type: nil, group: nil, created_at: "2017-01-08 02:08:17", updated_at: "2017-01-08 02:08:17">
+nil



 23) Error:
FinderTest#test_exists_with_order:
ActiveRecord::StatementInvalid: TinyTds::Error: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.: EXEC sp_executesql N'SELECT  DISTINCT 1 AS one FROM [topics]  ORDER BY [topics].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:7:in `select_rows'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:54:in `select_value'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:335:in `exists?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/finder_test.rb:209:in `test_exists_with_order'


 24) Error:
FinderTest#test_exists_with_distinct_association_includes_limit_and_order:
ActiveRecord::StatementInvalid: TinyTds::Error: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.: EXEC sp_executesql N'SELECT  DISTINCT 1 AS one FROM [posts] LEFT OUTER JOIN [comments] ON [comments].[post_id] = [posts].[id] AND [comments].[type] IN (N''SpecialComment'', N''SubSpecialComment'') INNER JOIN [categorizations] ON [posts].[id] = [categorizations].[post_id] WHERE [categorizations].[author_id] = @0 AND [posts].[id] = 1  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @1 ROWS ONLY', N'@0 int, @1 int', @0 = 1, @1 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:7:in `select_rows'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:54:in `select_value'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:335:in `exists?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/finder_test.rb:226:in `test_exists_with_distinct_association_includes_limit_and_order'


 25) Failure:
FinderTest#test_hash_condition_find_malformed [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/finder_test.rb:752]:
[ActiveRecord::StatementInvalid] exception expected, not
Class: <TypeError>
Message: <"sp_executesql_sql_type can not find sql type for attr #<ActiveRecord::Relation::QueryAttribute:0x007fce10138d38 @name=\"dhh\", @value_before_type_cast=true, @type=#<ActiveModel::Type::Value:0x007fce0c8d1d78 @precision=nil, @scale=nil, @limit=nil>, @original_attribute=nil, @value=true, @value_for_database=true>">
---Backtrace---
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:246:in `sp_executesql_sql_type'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:232:in `block in sp_executesql_types_and_parameters'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:231:in `each'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:231:in `each_with_index'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:231:in `sp_executesql_types_and_parameters'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:223:in `sp_executesql'
/Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:377:in `select_prepared'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:39:in `select_all'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:256:in `to_a'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:563:in `find_nth_with_limit'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:592:in `find_nth_with_limit_and_offset'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:545:in `find_nth'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:122:in `first'
/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/finder_test.rb:753:in `block in test_hash_condition_find_malformed'
---------------


 26) Failure:
FinderTest#test_condition_utc_time_interpolation_with_default_timezone_local [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/finder_test.rb:820]:
--- expected
+++ actual
@@ -1 +1 @@
-#<Topic id: 1, title: "The First Topic", author_name: "David", author_email_address: "david@loudthinking.com", written_on: "2003-07-16 14:28:11", bonus_time: "2000-01-01 09:28:00", last_read: "2004-04-15", content: "Have a nice day", important: nil, approved: false, replies_count: 1, unique_replies_count: 0, parent_id: nil, parent_title: nil, type: nil, group: nil, created_at: "2017-01-08 02:08:17", updated_at: "2017-01-08 02:08:17">
+nil



 27) Error:
FinderTest#test_exists_with_distinct_association_includes_and_limit:
ActiveRecord::StatementInvalid: TinyTds::Error: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.: EXEC sp_executesql N'SELECT  DISTINCT 1 AS one FROM [posts] LEFT OUTER JOIN [comments] ON [comments].[post_id] = [posts].[id] AND [comments].[type] IN (N''SpecialComment'', N''SubSpecialComment'') INNER JOIN [categorizations] ON [posts].[id] = [categorizations].[post_id] WHERE [categorizations].[author_id] = @0 AND [posts].[id] = 1  ORDER BY [posts].[id] ASC OFFSET 0 ROWS FETCH NEXT @1 ROWS ONLY', N'@0 int, @1 int', @0 = 1, @1 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:7:in `select_rows'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:54:in `select_value'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:335:in `exists?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/finder_test.rb:220:in `test_exists_with_distinct_association_includes_and_limit'


 28) Error:
EagerAssociationTest#test_0024_including association based on sql condition and no database column coerced:
ActiveRecord::StatementInvalid: TinyTds::Error: Incorrect syntax near 'limit'.: EXEC sp_executesql N'SELECT
      owners.*, (
        select p.pet_id from pets p
        where p.owner_id = owners.owner_id
        order by p.name desc
        limit 1
      ) as last_pet_id
     FROM [owners]  ORDER BY [owners].[owner_id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:256:in `to_a'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:563:in `find_nth_with_limit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:592:in `find_nth_with_limit_and_offset'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:545:in `find_nth'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:122:in `first'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/test/cases/coerced_tests.rb:297:in `block in <class:EagerAssociationTest>'


 29) Failure:
HasManyAssociationsTest#test_do_not_call_callbacks_for_delete_all [/Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/associations/has_many_associations_test.rb:248]:
bulbs should have been deleted using :delete_all strategy.
Expected: 0
  Actual: 1


 30) Error:
HasAndBelongsToManyAssociationsTest#test_include_returns_false_for_non_matching_record_to_verify_scoping:
ActiveRecord::StatementInvalid: TinyTds::Error: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.: EXEC sp_executesql N'SELECT  DISTINCT 1 AS one FROM [developers] INNER JOIN [developers_projects] ON [developers].[id] = [developers_projects].[developer_id] WHERE [developers_projects].[project_id] = @0 AND [developers].[id] = @1  ORDER BY [developers].[id] ASC OFFSET 0 ROWS FETCH NEXT @2 ROWS ONLY', N'@0 int, @1 int, @2 int', @0 = 1, @1 = 54, @2 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:7:in `select_rows'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:54:in `select_value'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:335:in `exists?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/associations/collection_association.rb:407:in `include?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/associations/collection_proxy.rb:898:in `include?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb:569:in `test_include_returns_false_for_non_matching_record_to_verify_scoping'


 31) Error:
HasAndBelongsToManyAssociationsTest#test_has_and_belongs_to_many:
ActiveRecord::StatementInvalid: TinyTds::Error: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.: EXEC sp_executesql N'SELECT  DISTINCT 1 AS one FROM [developers] INNER JOIN [developers_projects] ON [developers].[id] = [developers_projects].[developer_id] WHERE [developers_projects].[project_id] = @0  ORDER BY [developers].[id] ASC OFFSET 0 ROWS FETCH NEXT @1 ROWS ONLY', N'@0 int, @1 int', @0 = 1, @1 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:7:in `select_rows'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:54:in `select_value'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:335:in `exists?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/associations/collection_association.rb:350:in `empty?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/associations/has_many_association.rb:56:in `empty?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/associations/collection_proxy.rb:813:in `empty?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb:170:in `test_has_and_belongs_to_many'


 32) Error:
HasAndBelongsToManyAssociationsTest#test_include_checks_if_record_exists_if_target_not_loaded:
ActiveRecord::StatementInvalid: TinyTds::Error: ORDER BY items must appear in the select list if SELECT DISTINCT is specified.: EXEC sp_executesql N'SELECT  DISTINCT 1 AS one FROM [developers] INNER JOIN [developers_projects] ON [developers].[id] = [developers_projects].[developer_id] WHERE [developers_projects].[project_id] = @0 AND [developers].[id] = @1  ORDER BY [developers].[id] ASC OFFSET 0 ROWS FETCH NEXT @2 ROWS ONLY', N'@0 int, @1 int, @2 int', @0 = 1, @1 = 11, @2 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:7:in `select_rows'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:54:in `select_value'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:335:in `exists?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/associations/collection_association.rb:407:in `include?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/associations/collection_proxy.rb:898:in `include?'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb:559:in `block in test_include_checks_if_record_exists_if_target_not_loaded'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/test_case.rb:38:in `assert_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb:558:in `test_include_checks_if_record_exists_if_target_not_loaded'


 33) Error:
DateTest#test_date_with_string_value:
ArgumentError: wrong number of arguments (given 1, expected 0)
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/type/date.rb:13:in `to_s'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/type/date.rb:13:in `serialize'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/attribute.rb:51:in `value_for_database'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/query_attribute.rb:11:in `value_for_database'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:251:in `sp_executesql_sql_param'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:233:in `block in sp_executesql_types_and_parameters'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:231:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:231:in `each_with_index'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:231:in `sp_executesql_types_and_parameters'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:223:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:377:in `select_prepared'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:39:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/statement_cache.rb:109:in `execute'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/core.rb:203:in `find_by'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/date_test.rb:14:in `test_date_with_string_value'


 34) Error:
RelationTest#test_reverse_order_with_function:
ActiveRecord::StatementInvalid: TinyTds::Error: 'length' is not a recognized built-in function name.: EXEC sp_executesql N'SELECT  [topics].* FROM [topics]  ORDER BY length(title) DESC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:256:in `to_a'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:563:in `find_nth_with_limit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:592:in `find_nth_with_limit_and_offset'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:545:in `find_nth'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:122:in `first'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/relations_test.rb:229:in `test_reverse_order_with_function'


 35) Error:
RelationTest#test_multiple_where_and_having_clauses:
ActiveRecord::StatementInvalid: TinyTds::Error: Column 'posts.author_id' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.: EXEC sp_executesql N'SELECT [posts].* FROM [posts] WHERE [posts].[title] = @0 AND [posts].[title] = @1 GROUP BY [posts].[id] HAVING [posts].[id] = @2 AND [posts].[id] = @3', N'@0 nvarchar(4000), @1 nvarchar(4000), @2 int, @3 int', @0 = N'Welcome to the weblog', @1 = N'Welcome to the weblog', @2 = 1, @3 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:377:in `select_prepared'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:39:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:668:in `=='


 36) Error:
RelationTest#test_having_with_binds_for_both_where_and_having:
ActiveRecord::StatementInvalid: TinyTds::Error: Column 'posts.author_id' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause.: EXEC sp_executesql N'SELECT [posts].* FROM [posts] WHERE [posts].[title] = @0 GROUP BY [posts].[id] HAVING [posts].[id] = @1', N'@0 nvarchar(4000), @1 int', @0 = N'Welcome to the weblog', @1 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:377:in `select_prepared'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:39:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:668:in `=='


 37) Error:
RelationTest#test_reverse_order_with_function_other_predicates:
ActiveRecord::StatementInvalid: TinyTds::Error: 'length' is not a recognized built-in function name.: EXEC sp_executesql N'SELECT  [topics].* FROM [topics]  ORDER BY author_name DESC, length(title) DESC, id DESC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY', N'@0 int', @0 = 1
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:702:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/record_fetch_warning.rb:17:in `exec_queries'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:583:in `load'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:260:in `records'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:256:in `to_a'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:563:in `find_nth_with_limit'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:592:in `find_nth_with_limit_and_offset'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:545:in `find_nth'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation/finder_methods.rb:122:in `first'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/relations_test.rb:234:in `test_reverse_order_with_function_other_predicates'


 38) Error:
ActiveRecord::CollectionCacheKeyTest#test_0011_cache_key for queries with offset which return 0 rows:
ActiveRecord::StatementInvalid: TinyTds::Error: Column "developers.id" is invalid in the ORDER BY clause because it is not contained in either an aggregate function or the GROUP BY clause.: EXEC sp_executesql N'SELECT COUNT(*) AS [size], MAX([developers].[updated_at]) AS timestamp FROM [developers]  ORDER BY [developers].[id] ASC OFFSET @0 ROWS', N'@0 int', @0 = 20
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `each'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:322:in `handle_to_names_and_values_dblib'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:313:in `handle_to_names_and_values'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:292:in `_raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `block in raw_select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activesupport/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:287:in `raw_select'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:226:in `sp_executesql'
    /Users/kencollins/Repositories/activerecord-sqlserver-adapter/lib/active_record/connection_adapters/sqlserver/database_statements.rb:19:in `exec_query'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:48:in `select_one'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/collection_cache_key.rb:21:in `collection_cache_key'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/lib/active_record/relation.rb:337:in `cache_key'
    /Users/kencollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/bundler/gems/rails-3843ee5ac37f/activerecord/test/cases/collection_cache_key_test.rb:80:in `block in <class:CollectionCacheKeyTest>'


4856 runs, 14170 assertions, 18 failures, 23 errors, 3 skips
4856 runs, 14175 assertions, 20 failures, 18 errors, 3 skips

* 7 - Incorrect syntax
  3 - Incorrect syntax near '01'
  2 - Incorrect syntax near '07'
  1 - Incorrect syntax near '|'
  1 - Incorrect syntax near 'limit'
* 6 - ORDER BY items
* 3 - The number of rows provided for a TOP or FETCH clauses row count parameter must be an integer.
* 2 - ActiveRecord::ValueTooLong expected
* 1 - to be an instance of Time, not ActiveSupport::TimeWithZone
* 4 - is invalid in
  2 - is invalid in the select list
  1 - is invalid in the HAVING
  1 - is invalid in the ORDER BY clause
* 2 - No connection pool with id primary found

